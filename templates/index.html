<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Data Interpolation Tool</title>
    <style>
        body { font-family: sans-serif; margin: 2em; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Weather Data Tools</h1>

    <form method="post" enctype="multipart/form-data">
        <input type="file" name="file" accept=".csv" required>
        <br><br>
        <button type="submit" name="tool" value="interpolator">Interpolation Radiation to 15 Min</button>
        <hr style="margin: 1em 0; border: none; border-top: 1px solid #eee;">
        <label for="gap_tolerance">Gap Tolerance:</label>
        <select name="gap_tolerance" id="gap_tolerance">
            <option value="1">1 hour</option>
            <option value="3">3 hours</option>
            <option value="6" selected>6 hours</option>
            <option value="12">12 hours</option>
            <option value="24">24 hours</option>
            <option value="72">72 hours</option>
            <option value="240">240 hours</option>
        </select>
        <button type="submit" name="tool" value="gap_checker">Check for Gaps</button>
    </form>

    <hr style="margin: 2em 0;">

    <h2>Instructions</h2>
    <p><b>Interpolator:</b> Please select a csv file that was downloaded from the DDF Historical Observations card. It should contain `globalRadiation60Min` and/or `shortWaveRadiation` as a column. This tool accepts hourly data and will provide an interpolated file with 15-minute intervals.</p>
    <p><b>Gap Checker:</b> This tool checks for gaps in hourly data for each station in the uploaded file. It will report any gaps that are longer than 6 hours.</p>

    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    {% if gap_results %}
        <h3>Gap Check Results:</h3>
        <ul>
            {% for result in gap_results %}
                <li>{{ result }}</li>
            {% endfor %}
        </ul>
    {% endif %}
</body>
</html>
